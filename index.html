<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Matadan Nepal â€” Election 2082 BS / 2026 AD</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=DM+Sans:wght@300;400;500;600&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET + ROOT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --nc:#174ea6; --uml:#c0392b; --ncp:#6b0f1a; --rsp:#d4600a;
  --rpp:#1a7a40; --ujy:#0369a1; --janamat:#92400e; --psp:#7c3aed;
  --ssp:#78350f; --ind:#64748b;
  --ink:#0f1923; --ink-2:#374151; --ink-3:#6b7280; --ink-4:#9ca3af;
  --rule:#e5e7eb; --bg:#f5f4f0; --white:#ffffff;
  --red:#c0392b; --pre:#7c3aed; --gold:#b45309;
}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--ink);font-size:14px;line-height:1.55;-webkit-font-smoothing:antialiased;min-height:100vh}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.25}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.anim{opacity:0;animation:fadeUp .45s ease forwards}
.a1{animation-delay:.05s}.a2{animation-delay:.12s}.a3{animation-delay:.19s}
.a4{animation-delay:.26s}.a5{animation-delay:.33s}.a6{animation-delay:.4s}
.a7{animation-delay:.47s}.a8{animation-delay:.54s}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
header{background:var(--white);border-bottom:2px solid var(--red);position:sticky;top:0;z-index:200}
.header-top{max-width:1280px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:11px 28px 9px;gap:20px}
.brand{display:flex;align-items:center;gap:10px;text-decoration:none;cursor:pointer}
.brand-nep{font-family:'Playfair Display',serif;font-size:22px;font-weight:700;color:var(--red);line-height:1}
.brand-divider{width:1px;height:20px;background:var(--rule)}
.brand-eng{font-size:10px;font-weight:600;letter-spacing:2.5px;text-transform:uppercase;color:var(--ink-3)}
.nav{display:flex;gap:2px}
.nav-btn{font-size:12px;font-weight:500;color:var(--ink-2);border:none;background:transparent;padding:6px 14px;border-radius:3px;cursor:pointer;transition:background .15s;font-family:'DM Sans',sans-serif}
.nav-btn:hover{background:#f0f0ef}
.nav-btn.active{background:var(--ink);color:#fff}
.header-clock{font-family:'DM Mono',monospace;font-size:11px;color:var(--ink-3);white-space:nowrap}

/* COUNTDOWN STRIP */
.countdown-strip{background:linear-gradient(90deg,#1e1b4b 0%,#312e81 40%,#3730a3 100%);padding:10px 28px}
.countdown-inner{max-width:1280px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:20px;flex-wrap:wrap}
.cd-left{display:flex;align-items:center;gap:16px}
.cd-tag{font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#818cf8;white-space:nowrap}
.cd-units{display:flex;gap:8px}
.cd-unit{background:rgba(255,255,255,.12);border-radius:4px;padding:5px 10px;text-align:center;min-width:46px}
.cd-num{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:#fff;line-height:1}
.cd-lbl{font-size:8px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:#818cf8;margin-top:1px}
.cd-right{text-align:right}
.cd-right p{font-size:11px;color:#c7d2fe;line-height:1.6}
.cd-right strong{color:#fff}

/* INFO STRIP */
.info-strip{background:var(--ink);padding:5px 28px;display:flex;justify-content:center;align-items:center;gap:24px;flex-wrap:wrap}
.info-strip span{font-size:11px;color:#6b7280;letter-spacing:.3px}
.info-strip strong{color:#fcd34d}
.info-dot{color:#374151}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGES (SPA routing)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{display:none}
.page.active{display:block}
.page-content{max-width:1280px;margin:0 auto;padding:32px 28px 80px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED COMPONENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section-head{display:flex;align-items:baseline;justify-content:space-between;border-bottom:1.5px solid var(--ink);padding-bottom:8px;margin-bottom:22px}
.section-head h2{font-family:'Playfair Display',serif;font-size:19px;font-weight:700}
.section-head span{font-size:11px;color:var(--ink-3)}

.pre-notice{background:#faf5ff;border:1px solid #ddd6fe;border-left:4px solid var(--pre);border-radius:4px;padding:14px 18px;margin-bottom:28px;display:flex;gap:10px;align-items:flex-start}
.pre-notice .icon{font-size:18px;flex-shrink:0;margin-top:1px}
.pre-notice h4{font-size:13px;font-weight:700;color:var(--ink);margin-bottom:3px}
.pre-notice p{font-size:12px;color:var(--ink-2);line-height:1.55}
.pre-notice .zero-badge{display:inline-block;margin-top:8px;font-size:10px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;padding:3px 10px;border-radius:20px;background:#ede9fe;color:var(--pre);border:1px solid #ddd6fe}

/* Cards */
.card{background:var(--white);border:1px solid var(--rule);border-radius:4px}

/* Widget */
.widget{background:var(--white);border:1px solid var(--rule);border-radius:4px;overflow:hidden}
.widget-header{display:flex;align-items:center;justify-content:space-between;padding:11px 15px;border-bottom:1px solid var(--rule);background:var(--bg)}
.widget-header h3{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--ink-2)}
.widget-header span{font-size:10px;color:var(--ink-3)}

/* Badges */
.badge{font-size:10px;font-weight:700;letter-spacing:.4px;text-transform:uppercase;padding:2px 8px;border-radius:2px}
.badge-pre{background:#f5f3ff;color:var(--pre);border:1px solid #ddd6fe}
.badge-watch{background:#fef3c7;color:#92400e}
.badge-key{background:#fee2e2;color:#991b1b}
.badge-incumbent{background:#ede9fe;color:#5b21b6}
.badge-new{background:#fce7f3;color:#9d174d}
.badge-notable{background:#dcfce7;color:#15803d}
.badge-pm{background:#fef3c7;color:#92400e}
.badge-won{background:#dcfce7;color:#15803d}
.badge-nat{background:#dcfce7;color:#15803d}
.badge-below{background:#fee2e2;color:#991b1b}

/* Pill */
.pill{display:inline-block;font-size:9px;font-weight:700;padding:2px 7px;border-radius:2px;color:#fff;text-transform:uppercase;letter-spacing:.4px}

/* Toast */
#toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--ink);color:#fff;padding:10px 20px;border-radius:4px;font-size:12px;font-weight:500;box-shadow:0 4px 20px rgba(0,0,0,.25);transition:transform .35s cubic-bezier(.4,0,.2,1);z-index:999;white-space:nowrap}
#toast.show{transform:translateX(-50%) translateY(0)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE 1: DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* Seat bar */
.seat-bar-section{padding:24px 0 28px}
.seat-bar-label{display:flex;justify-content:space-between;font-size:11px;color:var(--ink-3);margin-bottom:6px}
.seat-bar-label strong{color:var(--ink);font-size:12px}
.seat-bar-track{height:14px;background:var(--rule);border-radius:7px;overflow:hidden;position:relative;display:flex}
.seat-bar-seg{height:100%;transition:width 1s}
.majority-marker{position:absolute;top:0;bottom:0;border-left:2px dashed #374151;z-index:10}
.majority-label{position:absolute;top:-18px;font-size:9px;font-weight:700;color:#374151;transform:translateX(-50%);white-space:nowrap}

/* Party grid */
.party-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:40px}
.party-card{background:var(--white);border:1px solid var(--rule);border-top:3px solid transparent;border-radius:4px;padding:16px;cursor:default}
.p-abbr{font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:3px}
.p-full{font-size:11px;color:var(--ink-3);margin-bottom:8px;line-height:1.35}
.p-leader-lbl{font-size:9px;font-weight:700;letter-spacing:.8px;text-transform:uppercase;color:var(--ink-4);margin-bottom:2px}
.p-leader{font-size:12px;font-weight:600;color:var(--ink-2);margin-bottom:10px}
.p-seats{display:flex;gap:14px}
.p-seat-item{text-align:center}
.p-seat-num{font-family:'Playfair Display',serif;font-size:26px;font-weight:700;line-height:1;color:var(--ink-3)}
.p-seat-lbl{font-size:9px;font-weight:700;letter-spacing:.8px;text-transform:uppercase;color:var(--ink-4)}
.pm-tag{display:inline-block;margin-top:10px;font-size:9px;font-weight:700;letter-spacing:.4px;text-transform:uppercase;padding:2px 8px;border-radius:2px;background:#fef3c7;color:#92400e}

/* Const table */
.two-col{display:grid;grid-template-columns:1fr 360px;gap:24px;align-items:start}
@media(max-width:920px){.two-col{grid-template-columns:1fr}}
.table-card{background:var(--white);border:1px solid var(--rule);border-radius:4px;overflow:hidden}
.table-filter{display:flex;gap:8px;align-items:center;padding:11px 14px;border-bottom:1px solid var(--rule);flex-wrap:wrap}
.search-inp{flex:1;min-width:160px;border:1px solid var(--rule);border-radius:3px;padding:6px 10px;font-size:12px;font-family:'DM Sans',sans-serif;outline:none;background:var(--bg);color:var(--ink)}
.search-inp:focus{border-color:var(--pre)}
.filter-chip{font-size:11px;font-weight:500;padding:4px 11px;border-radius:20px;border:1px solid var(--rule);cursor:pointer;color:var(--ink-2);background:transparent;transition:all .15s;font-family:'DM Sans',sans-serif;white-space:nowrap}
.filter-chip.active,.filter-chip:hover{background:var(--ink);color:#fff;border-color:var(--ink)}
table{width:100%;border-collapse:collapse}
thead th{background:var(--bg);font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--ink-3);padding:9px 14px;text-align:left;border-bottom:1px solid var(--rule);white-space:nowrap}
tbody tr{border-bottom:1px solid var(--rule);transition:background .1s;cursor:pointer}
tbody tr:last-child{border-bottom:none}
tbody tr:hover{background:#f5f5f2}
tbody td{padding:10px 14px;font-size:12px;vertical-align:middle}
.td-const-name{font-weight:600;color:var(--ink)}
.td-const-name small{font-weight:400;color:var(--ink-3);font-size:11px;display:block}
.cand-line{display:flex;align-items:center;gap:4px;line-height:1.7}
.cand-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.votes-zero{font-family:'DM Mono',monospace;font-size:11px;color:var(--pre)}
.show-more-btn{width:100%;padding:11px;font-size:12px;font-weight:600;color:var(--pre);background:var(--bg);border:none;border-top:1px solid var(--rule);cursor:pointer;font-family:'DM Sans',sans-serif;transition:background .15s}
.show-more-btn:hover{background:#ede9fe}

/* Sidebar */
.sidebar{display:flex;flex-direction:column;gap:18px}
.key-race{padding:11px 14px;border-bottom:1px solid var(--rule)}
.key-race:last-child{border-bottom:none}
.kr-title{font-size:12px;font-weight:700;color:var(--ink);margin-bottom:6px;display:flex;align-items:center;gap:6px;cursor:pointer}
.kr-title:hover{color:var(--rsp)}
.kr-cand{display:flex;align-items:center;gap:6px;font-size:12px;padding:2px 0}
.kr-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.kr-name{flex:1;font-weight:500}
.kr-votes{font-family:'DM Mono',monospace;font-size:11px;color:var(--ink-3)}

.leader-row{display:flex;align-items:center;gap:9px;padding:8px 14px;border-bottom:1px solid var(--rule)}
.leader-row:last-child{border-bottom:none}
.leader-dot{width:9px;height:9px;border-radius:50%;flex-shrink:0}
.leader-name{flex:1;font-size:12px;font-weight:600}
.leader-name small{font-weight:400;color:var(--ink-3);font-size:10px;display:block}
.leader-const{font-size:11px;color:var(--ink-3);text-align:right;white-space:nowrap}

.prov-row{display:flex;align-items:center;gap:8px;padding:8px 14px;border-bottom:1px solid var(--rule);font-size:12px}
.prov-row:last-child{border-bottom:none}
.prov-name{flex:1;font-weight:600}
.prov-name small{font-weight:400;color:var(--ink-3);font-size:10px}
.prov-seats{font-family:'DM Mono',monospace;font-size:11px;color:var(--ink-3)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE 2: CONSTITUENCY DETAIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.const-search-bar{background:var(--white);border-bottom:1px solid var(--rule);padding:10px 28px}
.const-search-inner{max-width:1280px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px}
.breadcrumb{display:flex;align-items:center;gap:6px;font-size:12px}
.breadcrumb a{color:var(--ink-3);text-decoration:none;cursor:pointer}
.breadcrumb a:hover{color:var(--ink)}
.breadcrumb span{color:var(--ink-3)}
.bc-current{color:var(--ink);font-weight:600}
.sc-wrap{position:relative}
.sc-input{border:1px solid var(--rule);border-radius:3px;padding:6px 10px 6px 28px;font-size:12px;font-family:'DM Sans',sans-serif;color:var(--ink);background:var(--bg);outline:none;width:220px;transition:border-color .15s}
.sc-input:focus{border-color:var(--pre)}
.sc-icon{position:absolute;left:8px;top:50%;transform:translateY(-50%);color:var(--ink-3);font-size:13px;pointer-events:none}
.sc-drop{position:absolute;top:calc(100% + 4px);left:0;right:0;background:var(--white);border:1px solid var(--rule);border-radius:4px;box-shadow:0 8px 24px rgba(0,0,0,.12);z-index:300;display:none;max-height:240px;overflow-y:auto}
.sc-drop.open{display:block}
.sc-item{padding:9px 14px;cursor:pointer;font-size:12px;border-bottom:1px solid var(--rule);display:flex;align-items:center;justify-content:space-between;transition:background .1s}
.sc-item:last-child{border-bottom:none}
.sc-item:hover{background:#f0f4f8}

/* Hero */
.hero{background:var(--white);border:1px solid var(--rule);border-radius:4px;margin-bottom:24px;overflow:hidden}
.hero-top{display:grid;grid-template-columns:1fr auto;gap:20px;align-items:start;padding:20px 24px 16px;border-bottom:1px solid var(--rule)}
.hero-h1{font-family:'Playfair Display',serif;font-size:24px;font-weight:700;line-height:1.1;margin-bottom:4px}
.hero-ne{font-style:italic;color:var(--ink-3);font-size:14px;font-family:'Playfair Display',serif;display:block;margin-top:2px}
.hero-chips{display:flex;gap:7px;flex-wrap:wrap;margin-top:10px}
.chip{font-size:11px;font-weight:500;color:var(--ink-2);padding:3px 10px;background:var(--bg);border:1px solid var(--rule);border-radius:20px}
.hero-right{text-align:right}
.hero-pre-badge{display:inline-block;font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:4px 12px;border-radius:3px;background:#f5f3ff;color:var(--pre);border:1px solid #ddd6fe;margin-bottom:6px}
.hero-updated{font-size:11px;color:var(--ink-3);white-space:nowrap}
.hero-bar-row{padding:12px 24px;display:flex;align-items:center;gap:14px;border-bottom:1px solid var(--rule)}
.hb-label{font-size:10px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;color:var(--ink-3);white-space:nowrap}
.hb-track{flex:1;height:7px;background:var(--rule);border-radius:4px;overflow:hidden}
.hb-fill{height:100%;width:0%;background:var(--pre);border-radius:4px}
.hb-pct{font-family:'DM Mono',monospace;font-size:12px;font-weight:600;color:var(--pre);white-space:nowrap}
.hb-detail{font-size:11px;color:var(--ink-3);white-space:nowrap}
.hero-waiting{padding:14px 24px;background:#faf5ff;display:flex;gap:10px;align-items:center}
.hw-icon{font-size:18px;flex-shrink:0}
.hw-text h3{font-size:12px;font-weight:700;color:var(--ink);margin-bottom:2px}
.hw-text p{font-size:11px;color:var(--ink-3);line-height:1.5}

/* Cand cards */
.cand-list{display:flex;flex-direction:column;gap:9px;margin-bottom:22px}
.cand-card{background:var(--white);border:1px solid var(--rule);border-radius:4px;padding:14px 18px;cursor:pointer;transition:box-shadow .2s;position:relative;overflow:hidden}
.cand-card:hover{box-shadow:0 4px 14px rgba(0,0,0,.08)}
.cand-top{display:flex;align-items:center;gap:11px}
.cand-num{font-family:'DM Mono',monospace;font-size:12px;font-weight:700;color:var(--ink-3);width:20px;flex-shrink:0;text-align:center}
.cand-avatar{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:14px;font-weight:700;color:#fff;flex-shrink:0}
.cand-info{flex:1}
.cand-name{font-size:14px;font-weight:700;color:var(--ink);line-height:1.2}
.cand-party{font-size:11px;font-weight:600;margin-top:1px}
.cand-party-full{font-size:11px;color:var(--ink-3);font-weight:400}
.cand-votes{text-align:right;flex-shrink:0}
.cand-votes-num{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:var(--ink-3);line-height:1}
.cand-votes-lbl{font-size:10px;color:var(--ink-3)}
.cand-meta{margin-top:9px;padding-left:32px;display:flex;gap:7px;flex-wrap:wrap;align-items:center}

/* Prev results */
.prev-section{background:var(--white);border:1px solid var(--rule);border-radius:4px;padding:16px 18px;margin-bottom:22px}
.prev-row{display:flex;align-items:center;gap:9px;padding:7px 0;border-bottom:1px solid var(--rule)}
.prev-row:last-child{border-bottom:none}
.prev-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.prev-name{flex:1;font-size:12px;font-weight:600}
.prev-name small{font-weight:400;color:var(--ink-3);font-size:10px;display:block}
.prev-votes{font-family:'DM Mono',monospace;font-size:12px;color:var(--ink-2)}
.prev-bar-wrap{width:80px;height:4px;background:var(--rule);border-radius:2px;margin-top:3px}
.prev-bar-fill{height:100%;border-radius:2px}

/* Const facts sidebar */
.facts-list{padding:12px 14px;display:flex;flex-direction:column;gap:8px}
.fact-row{display:flex;justify-content:space-between;align-items:baseline}
.fact-label{font-size:12px;color:var(--ink-3)}
.fact-val{font-size:12px;font-weight:600;color:var(--ink);font-family:'DM Mono',monospace}

.nearby-row{display:flex;align-items:center;gap:8px;padding:9px 14px;border-bottom:1px solid var(--rule);cursor:pointer;transition:background .1s}
.nearby-row:last-child{border-bottom:none}
.nearby-row:hover{background:#f5f5f2}
.nearby-name{flex:1;font-size:12px;font-weight:600}
.nearby-name small{font-weight:400;color:var(--ink-3);font-size:10px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE 3: PR DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.pr-page-title{display:flex;align-items:flex-end;justify-content:space-between;border-bottom:1.5px solid var(--ink);padding-bottom:14px;margin-bottom:28px}
.pr-page-title h1{font-family:'Playfair Display',serif;font-size:26px;font-weight:700;line-height:1.1}
.pr-page-title h1 em{font-style:italic;color:var(--ink-3);font-size:16px;display:block;margin-top:3px;font-family:'Playfair Display',serif}
.pr-meta{text-align:right;font-size:11px;color:var(--ink-3);line-height:1.7}
.pr-meta strong{color:var(--ink-2)}

.stat-row{display:grid;grid-template-columns:repeat(5,1fr);gap:11px;margin-bottom:32px}
@media(max-width:800px){.stat-row{grid-template-columns:repeat(3,1fr)}}
.stat-card{background:var(--white);border:1px solid var(--rule);border-radius:4px;padding:14px 16px}
.stat-label{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--ink-3);margin-bottom:5px}
.stat-num{font-family:'Playfair Display',serif;font-size:28px;font-weight:700;line-height:1;color:var(--ink);margin-bottom:2px}
.stat-sub{font-size:10px;color:var(--ink-3)}

.pr-table-card{background:var(--white);border:1px solid var(--rule);border-radius:4px;overflow:hidden;margin-bottom:32px}
.pr-table-card table thead th{padding:9px 14px}
.pr-table-card table tbody td{padding:10px 14px}
.ref-bar-wrap{width:100px;height:4px;background:var(--rule);border-radius:2px;margin-top:4px}
.ref-bar-fill{height:100%;border-radius:2px}
.mono{font-family:'DM Mono',monospace;font-size:12px}
.zero-pre{font-family:'DM Mono',monospace;font-size:11px;color:var(--pre)}

.thr-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px}
@media(max-width:640px){.thr-grid{grid-template-columns:1fr}}
.thr-box{background:var(--white);border:1px solid var(--rule);border-radius:4px;padding:14px 16px}
.thr-box h4{font-size:10px;font-weight:700;letter-spacing:.8px;text-transform:uppercase;color:var(--ink-3);margin-bottom:7px}
.thr-box p{font-size:12px;color:var(--ink-2);line-height:1.55}
.thr-note{display:flex;gap:10px;align-items:flex-start;background:#fef9c3;border:1px solid #fde68a;border-radius:4px;padding:12px 14px;font-size:12px;color:#78350f;line-height:1.5}

.ref-section{background:var(--white);border:1px solid var(--rule);border-radius:4px;overflow:hidden}
.ref-row{display:flex;align-items:center;gap:9px;padding:9px 14px;border-bottom:1px solid var(--rule)}
.ref-row:last-child{border-bottom:none}
.ref-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.ref-name{flex:1;font-size:12px;font-weight:600}
.ref-name small{font-weight:400;color:var(--ink-3);font-size:10px;display:block}
.ref-bar-h{width:80px}
.ref-bar-hbg{height:4px;background:var(--rule);border-radius:2px}
.ref-bar-hfill{height:100%;border-radius:2px}
.ref-pct{font-family:'DM Mono',monospace;font-size:12px;font-weight:600;width:44px;text-align:right}
.ref-seats{font-family:'DM Mono',monospace;font-size:11px;color:var(--ink-3);width:50px}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER (shared, always visible)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
  <div class="header-top">
    <div class="brand" onclick="nav('dashboard')">
      <span class="brand-nep">à¤®à¤¤à¤¦à¤¾à¤¨ à¤¨à¥‡à¤ªà¤¾à¤²</span>
      <div class="brand-divider"></div>
      <span class="brand-eng">Matadan Nepal</span>
    </div>
    <nav class="nav">
      <button class="nav-btn active" id="nav-dashboard" onclick="nav('dashboard')">Dashboard</button>
      <button class="nav-btn" id="nav-constituency" onclick="nav('constituency')">Constituencies</button>
      <button class="nav-btn" id="nav-pr" onclick="nav('pr')">PR Results</button>
    </nav>
    <span class="header-clock" id="clock">â€”</span>
  </div>

  <div class="countdown-strip">
    <div class="countdown-inner">
      <div class="cd-left">
        <span class="cd-tag">Election Day Countdown</span>
        <div class="cd-units">
          <div class="cd-unit"><div class="cd-num" id="cd-d">â€”</div><div class="cd-lbl">Days</div></div>
          <div class="cd-unit"><div class="cd-num" id="cd-h">â€”</div><div class="cd-lbl">Hours</div></div>
          <div class="cd-unit"><div class="cd-num" id="cd-m">â€”</div><div class="cd-lbl">Mins</div></div>
          <div class="cd-unit"><div class="cd-num" id="cd-s">â€”</div><div class="cd-lbl">Secs</div></div>
        </div>
      </div>
      <div class="cd-right">
        <p><strong>Pratinidhi Sabha Nirvachan 2082 BS</strong></p>
        <p>Falgun 21, 2082 &nbsp;Â·&nbsp; <strong>5 March 2026</strong> &nbsp;Â·&nbsp; 7:00 AM â€“ 5:00 PM NST</p>
        <p>18,903,689 registered voters &nbsp;Â·&nbsp; 3,484 candidates &nbsp;Â·&nbsp; 68 parties</p>
      </div>
    </div>
  </div>

  <div class="info-strip">
    <span>House of Representatives â€” Pratinidhi Sabha</span>
    <span class="info-dot">Â·</span>
    <span><strong>165 FPTP</strong> seats</span>
    <span class="info-dot">+</span>
    <span><strong>110 PR</strong> seats</span>
    <span class="info-dot">=</span>
    <span><strong>275 total</strong> seats</span>
    <span class="info-dot">Â·</span>
    <span>Majority: <strong>138</strong></span>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 1: DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-dashboard" class="page active">
  <div class="page-content">

    <div class="pre-notice anim a1">
      <div class="icon">â³</div>
      <div>
        <h4>Awaiting Election Day â€” Falgun 21, 2082 BS &nbsp;(5 March 2026)</h4>
        <p>All vote counts are zero. This dashboard will update live once counting begins after 5PM on election day. Party, candidate, and constituency data below is verified from the Election Commission of Nepal and major Nepali news sources.</p>
        <span class="zero-badge">All vote counts = 0 until counting begins</span>
      </div>
    </div>

    <!-- SEAT ALLOCATION BAR -->
    <div class="section-head anim a2">
      <h2>Seat Allocation â€” 275 Seats</h2>
      <span>138 needed for majority Â· All at 0</span>
    </div>
    <div class="card anim a2" style="padding:0 24px 20px">
      <div class="seat-bar-section">
        <div class="seat-bar-label">
          <strong>0 seats declared</strong>
          <span>275 total Â· 138 majority</span>
        </div>
        <div class="seat-bar-track" id="seat-bar">
          <div style="width:100%;background:var(--rule)"></div>
          <div class="majority-marker" style="left:50.18%">
            <span class="majority-label">138 â€” Majority</span>
          </div>
        </div>
        <div style="display:flex;gap:16px;flex-wrap:wrap;margin-top:10px">
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--nc);display:inline-block"></span>NC: 0</div>
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--uml);display:inline-block"></span>UML: 0</div>
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--ncp);display:inline-block"></span>NCP: 0</div>
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--rsp);display:inline-block"></span>RSP: 0</div>
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--rpp);display:inline-block"></span>RPP: 0</div>
          <div style="display:flex;align-items:center;gap:6px;font-size:11px;color:var(--ink-3)"><span style="width:10px;height:10px;border-radius:50%;background:var(--ind);display:inline-block"></span>Others: 0</div>
        </div>
      </div>
    </div>

    <!-- PARTY GRID -->
    <div class="section-head anim a3">
      <h2>Contesting Parties</h2>
      <span>Major parties Â· 68 registered Â· 2082 BS</span>
    </div>
    <div class="party-grid" id="party-grid"></div>

    <!-- CONSTITUENCIES TABLE + SIDEBAR -->
    <div class="section-head anim a4">
      <h2>Constituencies &amp; Candidates</h2>
      <span>Select races shown Â· Click any row for details</span>
    </div>
    <div class="two-col anim a5">
      <div class="table-card">
        <div class="table-filter">
          <input class="search-inp" type="text" id="d-search" placeholder="Search constituency or candidateâ€¦" oninput="filterConst(this.value)"/>
          <button class="filter-chip active" onclick="filterProv(this,'all')">All</button>
          <button class="filter-chip" onclick="filterProv(this,'Bagmati')">Bagmati</button>
          <button class="filter-chip" onclick="filterProv(this,'Koshi')">Koshi</button>
          <button class="filter-chip" onclick="filterProv(this,'Madhesh')">Madhesh</button>
          <button class="filter-chip" onclick="filterProv(this,'Gandaki')">Gandaki</button>
        </div>
        <table>
          <thead><tr>
            <th>Constituency</th>
            <th>Key Candidates</th>
            <th>Voters</th>
            <th>Votes Cast</th>
          </tr></thead>
          <tbody id="const-tbody"></tbody>
        </table>
        <button class="show-more-btn" id="show-more" onclick="showMore()">Show more â†“</button>
      </div>

      <div class="sidebar">
        <div class="widget anim a5">
          <div class="widget-header"><h3>Key Races to Watch</h3><span>High-profile contests</span></div>
          <div id="key-races-widget"></div>
        </div>
        <div class="widget anim a6">
          <div class="widget-header"><h3>Party Leaders' Seats</h3></div>
          <div id="leaders-widget"></div>
        </div>
        <div class="widget anim a7">
          <div class="widget-header"><h3>Seats by Province</h3><span>FPTP</span></div>
          <div id="prov-widget"></div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 2: CONSTITUENCY DETAIL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-constituency" class="page">
  <!-- Sub-nav bar for constituency search -->
  <div class="const-search-bar">
    <div class="const-search-inner">
      <div class="breadcrumb">
        <a onclick="nav('dashboard')">Home</a>
        <span>â€º</span>
        <a onclick="nav('constituency')">Constituencies</a>
        <span>â€º</span>
        <span id="bc-prov" class="bc-current">Bagmati</span>
        <span>â€º</span>
        <span id="bc-name" class="bc-current">Kathmandu-3</span>
      </div>
      <div class="sc-wrap">
        <span class="sc-icon">âŒ•</span>
        <input class="sc-input" type="text" id="sc-inp" placeholder="Jump to constituencyâ€¦" autocomplete="off"/>
        <div class="sc-drop" id="sc-drop"></div>
      </div>
    </div>
  </div>

  <div class="page-content" style="padding-top:20px">
    <div class="hero anim a1">
      <div class="hero-top">
        <div>
          <div class="hero-h1" id="hero-h1">â€”</div>
          <div class="hero-chips" id="hero-chips"></div>
        </div>
        <div class="hero-right">
          <div class="hero-pre-badge">â³ Pre-Election</div>
          <div class="hero-updated">Election: <strong>5 March 2026</strong></div>
          <div class="hero-updated" style="margin-top:3px">Falgun 21, 2082 BS</div>
        </div>
      </div>
      <div class="hero-bar-row">
        <span class="hb-label">Votes Counted</span>
        <div class="hb-track"><div class="hb-fill"></div></div>
        <span class="hb-pct">0%</span>
        <span class="hb-detail">Counting not started</span>
      </div>
      <div class="hero-waiting">
        <div class="hw-icon">ğŸ—³</div>
        <div class="hw-text">
          <h3>Awaiting Falgun 21, 2082 BS â€” 5 March 2026</h3>
          <p>Candidate data below is verified from the ECN and Nepali media. Vote counts will appear here once counting begins after 5PM election day.</p>
        </div>
      </div>
    </div>

    <div class="two-col">
      <div>
        <div class="section-head"><h2 id="cands-head">Candidates</h2><span>Votes: 0 Â· Not yet voted</span></div>
        <div class="cand-list" id="cand-list"></div>
        <div class="prev-section">
          <div class="section-head" style="margin-bottom:12px"><h2>2079 BS Result</h2><span>Previous election reference</span></div>
          <div id="prev-list"></div>
        </div>
      </div>
      <div class="sidebar">
        <div class="widget anim a2">
          <div class="widget-header"><h3>Constituency Facts</h3></div>
          <div class="facts-list" id="facts-list"></div>
        </div>
        <div class="widget anim a3">
          <div class="widget-header"><h3>Data Sources</h3><span>Verified</span></div>
          <div style="padding:10px 14px;display:flex;flex-direction:column;gap:7px">
            <div style="display:flex;align-items:center;gap:7px;font-size:12px"><span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:2px;background:#fef3c7;color:#92400e">Official</span><span>Election Commission Nepal</span></div>
            <div style="display:flex;align-items:center;gap:7px;font-size:12px"><span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:2px;background:#e0e7ff;color:#3730a3">Media</span><span>Kathmandu Post</span></div>
            <div style="display:flex;align-items:center;gap:7px;font-size:12px"><span style="font-size:10px;font-weight:700;padding:2px 7px;border-radius:2px;background:#e0e7ff;color:#3730a3">Media</span><span>Onlinekhabar Â· Khabarhub</span></div>
            <p style="font-size:10px;color:var(--ink-3);padding-top:4px;line-height:1.5">Candidate data confirmed from ECN official nominations filed Jan 2026.</p>
          </div>
        </div>
        <div class="widget anim a4">
          <div class="widget-header"><h3>Nearby Constituencies</h3></div>
          <div id="nearby-list"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 3: PR DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-pr" class="page">
  <div class="page-content">

    <div class="pr-page-title anim a1">
      <h1>Proportional Representation
        <em>à¤¸à¤®à¤¾à¤¨à¥à¤ªà¤¾à¤¤à¤¿à¤• à¤¨à¤¿à¤°à¥à¤µà¤¾à¤šà¤¨ â€” 2082 BS / 2026 AD</em>
      </h1>
      <div class="pr-meta">
        <p>Election: <strong>5 March 2026</strong></p>
        <p>Registered voters: <strong>18,903,689</strong></p>
        <p>Threshold: <strong>3% of valid PR votes</strong></p>
      </div>
    </div>

    <div class="pre-notice anim a1">
      <div class="icon">â³</div>
      <div>
        <h4>PR results will populate after Election Day â€” Falgun 21, 2082 BS</h4>
        <p>All PR vote counts are 0. Party registration data and the 2079 BS reference results are shown. Nepal uses the <strong>Webster method (first divisor 1.4)</strong> to allocate the 110 PR seats among qualifying parties. Only parties crossing <strong>3% of valid votes</strong> qualify as national parties and receive PR seats.</p>
      </div>
    </div>

    <div class="stat-row anim a2" id="pr-stats"></div>

    <div class="section-head anim a3">
      <h2>Registered Parties â€” PR Vote Tracker</h2>
      <span>All 2082 votes at 0 Â· 2079 BS reference shown</span>
    </div>
    <div class="pr-table-card anim a3">
      <table>
        <thead><tr>
          <th>#</th><th>Party</th><th>Nepali Name</th><th>Leader</th>
          <th>2082 PR Votes</th><th>2082 Vote %</th><th>Projected Seats</th>
          <th>2079 BS % (Ref.)</th><th>Nat. Party?</th>
        </tr></thead>
        <tbody id="pr-tbody"></tbody>
      </table>
    </div>

    <div class="section-head anim a4">
      <h2>How PR Seat Allocation Works</h2>
      <span>Nepal's proportional system</span>
    </div>
    <div class="thr-grid anim a4">
      <div class="thr-box"><h4>1 â€” Cast Your PR Vote</h4><p>Each voter gets <strong>two ballot papers</strong>. The second is for a <strong>political party</strong>. This determines PR seat distribution nationally.</p></div>
      <div class="thr-box"><h4>2 â€” 3% Threshold</h4><p>Only parties receiving <strong>â‰¥ 3%</strong> of valid PR votes qualify as National Parties and receive proportional seats. Parties below 3% get zero PR seats.</p></div>
      <div class="thr-box"><h4>3 â€” Webster Method</h4><p>The <strong>110 PR seats</strong> are allocated using the Webster/Sainte-LaguÃ« method with <strong>first divisor 1.4</strong> â€” making it slightly harder for the smallest qualifying parties.</p></div>
      <div class="thr-box"><h4>4 â€” Inclusivity Quota</h4><p>Each party's PR list must guarantee representation of <strong>women, Dalits, Janajatis, Madhesis, Tharus, Muslims</strong>, and other groups per Art. 84 of the Constitution.</p></div>
    </div>
    <div class="thr-note anim a4">
      <span>âš ï¸</span>
      <span><strong>New entrants to watch in 2082:</strong> Ujyalo Nepal Party (Kulman Ghising), Shram Sanskriti Party (Harka Sampang), and the merged Nepali Communist Party's PR share are all uncertain. Any party near the 3% line faces a threshold cliff â€” missing it means zero PR seats regardless of FPTP performance.</span>
    </div>

    <div class="section-head anim a5" style="margin-top:32px">
      <h2>2079 BS Reference â€” PR Results</h2>
      <span>Previous election Â· For comparison</span>
    </div>
    <div class="ref-section anim a5" id="ref-section"></div>

  </div>
</div>

<div id="toast"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DATA + JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// REAL 2082 DATA â€” Sources: ECN, Kathmandu Post, Onlinekhabar,
// Khabarhub, Wikipedia 2026 Nepal election article
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const PARTIES = [
  { abbr:'NC',      color:'#174ea6', name:'Nepali Congress',                    ne:'à¤¨à¥‡à¤ªà¤¾à¤²à¥€ à¤•à¤¾à¤‚à¤—à¥à¤°à¥‡à¤¸',              leader:'Gagan Kumar Thapa',       pmcand:true,  prev2079pct:27.00, prevSeats:32 },
  { abbr:'UML',     color:'#c0392b', name:'CPN (Unified Marxist-Leninist)',     ne:'à¤à¤•à¥€à¤•à¥ƒà¤¤ à¤®à¤¾à¤²à¥‡',                  leader:'K.P. Sharma Oli',         pmcand:true,  prev2079pct:23.00, prevSeats:34 },
  { abbr:'NCP',     color:'#6b0f1a', name:'Nepali Communist Party',             ne:'à¤¨à¥‡à¤ªà¤¾à¤²à¥€ à¤•à¤®à¥à¤¯à¥à¤¨à¤¿à¤¸à¥à¤Ÿ à¤ªà¤¾à¤°à¥à¤Ÿà¥€',    leader:'Pushpa Kamal Dahal',      pmcand:false, prev2079pct:null,  prevSeats:null, note:'New: Maoist Centre + others merged' },
  { abbr:'RSP',     color:'#d4600a', name:'Rastriya Swatantra Party',           ne:'à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°à¤¿à¤¯ à¤¸à¥à¤µà¤¤à¤¨à¥à¤¤à¥à¤° à¤ªà¤¾à¤°à¥à¤Ÿà¥€', leader:'Balendra Shah',           pmcand:true,  prev2079pct:10.55, prevSeats:13 },
  { abbr:'RPP',     color:'#1a7a40', name:'Rastriya Prajatantra Party',         ne:'à¤°à¤¾à¤·à¥à¤Ÿà¥à¤°à¤¿à¤¯ à¤ªà¥à¤°à¤œà¤¾à¤¤à¤¨à¥à¤¤à¥à¤° à¤ªà¤¾à¤°à¥à¤Ÿà¥€',leader:'Rajendra Lingden',        pmcand:false, prev2079pct:5.56,  prevSeats:7  },
  { abbr:'UNP',     color:'#0369a1', name:'Ujyalo Nepal Party',                 ne:'à¤‰à¤œà¥à¤¯à¤¾à¤²à¥‹ à¤¨à¥‡à¤ªà¤¾à¤² à¤ªà¤¾à¤°à¥à¤Ÿà¥€',        leader:'Kulman Ghising',          pmcand:false, prev2079pct:null,  prevSeats:null, note:'New 2025' },
  { abbr:'PSP-N',   color:'#7c3aed', name:"People's Socialist Party, Nepal",    ne:'à¤œà¤¨à¤¤à¤¾ à¤¸à¤®à¤¾à¤œà¤µà¤¾à¤¦à¥€ à¤ªà¤¾à¤°à¥à¤Ÿà¥€',        leader:'Upendra Yadav',           pmcand:false, prev2079pct:3.09,  prevSeats:3  },
  { abbr:'Janamat', color:'#92400e', name:'Janamat Party',                      ne:'à¤œà¤¨à¤®à¤¤ à¤ªà¤¾à¤°à¥à¤Ÿà¥€',                  leader:'C.K. Raut',               pmcand:false, prev2079pct:1.29,  prevSeats:null, note:'Below threshold 2022' },
  { abbr:'SSP',     color:'#78350f', name:'Shram Sanskriti Party',              ne:'à¤¶à¥à¤°à¤® à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤¿ à¤ªà¤¾à¤°à¥à¤Ÿà¥€',        leader:'Harka Sampang Rai',       pmcand:false, prev2079pct:null,  prevSeats:null, note:'New 2025' },
];

const CONSTITUENCIES = [
  // Koshi Province
  { id:'Jhapa-1',   province:'Koshi',   district:'Jhapa',     voters:89200,  key:false,
    cands:[{n:'Nabaraj Dahal',p:'NC',c:'#174ea6',i:'ND'},{n:'Radheshyam Adhikari',p:'UML',c:'#c0392b',i:'RA'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:14200,w:true},{n:'UML Candidate',p:'UML',c:'#c0392b',v:10800,w:false}], nearby:['Jhapa-2','Jhapa-3','Jhapa-5'] },
  { id:'Jhapa-2',   province:'Koshi',   district:'Jhapa',     voters:92100,  key:true, keyLbl:'Watch',
    cands:[{n:'Devraj Ghimire',p:'UML',c:'#c0392b',i:'DG',incumbent:true},{n:'Ramesh Khatri',p:'NC',c:'#174ea6',i:'RK'},{n:'Indira Rana Magar',p:'RSP',c:'#d4600a',i:'IR'}],
    prev:[{n:'Devraj Ghimire',p:'UML',c:'#c0392b',v:18400,w:true},{n:'NC Candidate',p:'NC',c:'#174ea6',v:13200,w:false}], nearby:['Jhapa-1','Jhapa-3','Jhapa-5'] },
  { id:'Jhapa-3',   province:'Koshi',   district:'Jhapa',     voters:88400,  key:false,
    cands:[{n:'Rajendra Lingden',p:'RPP',c:'#1a7a40',i:'RL',notable:true},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'Rajendra Lingden',p:'RPP',c:'#1a7a40',v:16100,w:true},{n:'NC Candidate',p:'NC',c:'#174ea6',v:11800,w:false}], nearby:['Jhapa-2','Jhapa-5'] },
  { id:'Jhapa-5',   province:'Koshi',   district:'Jhapa',     voters:98700,  key:true, keyLbl:'Most Watched',
    cands:[{n:'K.P. Sharma Oli',p:'UML',c:'#c0392b',i:'KO',pmcand:true,incumbent:true,notes:'Won 2022 with 52,319 votes; UML Chairman'},{n:'Balendra Shah',p:'RSP',c:'#d4600a',i:'BS',pmcand:true,notable:true,notes:'Former Ktm Mayor; RSP PM candidate'},{n:'Khagendra Adhikari',p:'NC',c:'#174ea6',i:'KA',notes:'Runner-up 2022 with 23,743 votes'}],
    prev:[{n:'K.P. Sharma Oli',p:'UML',c:'#c0392b',v:52319,w:true},{n:'Khagendra Adhikari',p:'NC',c:'#174ea6',v:23743,w:false},{n:'Suresh K. Pokharel',p:'RSP',c:'#d4600a',v:11759,w:false}], nearby:['Jhapa-1','Jhapa-2','Jhapa-3'] },
  { id:'Morang-6',  province:'Koshi',   district:'Morang',    voters:84300,  key:false,
    cands:[{n:'Shekhar Koirala',p:'NC',c:'#174ea6',i:'SK',notable:true},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:18200,w:true}], nearby:['Morang-1','Morang-2'] },
  { id:'Sunsari-1', province:'Koshi',   district:'Sunsari',   voters:79800,  key:true, keyLbl:'Watch',
    cands:[{n:'Harka Sampang Rai',p:'SSP',c:'#78350f',i:'HS',notable:true,notes:'Former Dharan Mayor; "Soil" election symbol'},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:16400,w:true}], nearby:['Sunsari-2','Sunsari-3'] },
  // Madhesh Province
  { id:'Sarlahi-4', province:'Madhesh', district:'Sarlahi',   voters:71200,  key:true, keyLbl:'Watch',
    cands:[{n:'Gagan Kumar Thapa',p:'NC',c:'#174ea6',i:'GT',pmcand:true,notes:'NC President; PM Candidate; moved from Ktm-4'},{n:'Amaresh Kumar Singh',p:'RSP',c:'#d4600a',i:'AS'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:21000,w:true},{n:'UML Candidate',p:'UML',c:'#c0392b',v:14000,w:false}], nearby:['Sarlahi-3','Sarlahi-5'] },
  { id:'Saptari-2', province:'Madhesh', district:'Saptari',   voters:68400,  key:false,
    cands:[{n:'C.K. Raut',p:'Janamat',c:'#92400e',i:'CR',notable:true},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'C.K. Raut',p:'Janamat',c:'#92400e',v:15200,w:true}], nearby:['Saptari-1','Saptari-3'] },
  // Bagmati Province
  { id:'Kathmandu-1',  province:'Bagmati', district:'Kathmandu', voters:91800,  key:true, keyLbl:'Watch',
    cands:[{n:'Prabal Thapa',p:'NC',c:'#174ea6',i:'PT'},{n:'Mohan Regmi',p:'UML',c:'#c0392b',i:'MR'},{n:'Ranju Darshana',p:'RSP',c:'#d4600a',i:'RD',incumbent:true},{n:'Rabindra Mishra',p:'RPP',c:'#1a7a40',i:'RM',notable:true}],
    prev:[{n:'Ranju Darshana',p:'RSP',c:'#d4600a',v:16200,w:true},{n:'NC Candidate',p:'NC',c:'#174ea6',v:11800,w:false}], nearby:['Kathmandu-2','Kathmandu-3','Kathmandu-4','Kathmandu-5'] },
  { id:'Kathmandu-2',  province:'Bagmati', district:'Kathmandu', voters:88200,  key:false,
    cands:[{n:'Kabir Sharma',p:'NC',c:'#174ea6',i:'KS'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'},{n:'NCP Candidate',p:'NCP',c:'#6b0f1a',i:'NC'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:14100,w:true},{n:'UML',p:'UML',c:'#c0392b',v:10200,w:false}], nearby:['Kathmandu-1','Kathmandu-3','Kathmandu-4'] },
  { id:'Kathmandu-3',  province:'Bagmati', district:'Kathmandu', voters:85600,  key:true, keyLbl:'Watch',
    cands:[{n:'Ramesh Aryal',p:'NC',c:'#174ea6',i:'RA',notes:'NC candidate'},{n:'Rameshwor Phuyal',p:'UML',c:'#c0392b',i:'RP',notes:'UML candidate'},{n:'Kulman Ghising',p:'UNP',c:'#0369a1',i:'KG',notable:true,notes:'Former Energy Minister; Ujyalo Nepal Party'},{n:'Raju Pandey',p:'RSP',c:'#d4600a',i:'RP2'}],
    prev:[{n:'Agni Sapkota',p:'NCP (Maoist)',c:'#6b0f1a',v:14822,w:true},{n:'Bishnu Rijal',p:'NC',c:'#174ea6',v:12418,w:false},{n:'Biraj Bhakta Shrestha',p:'RSP',c:'#d4600a',v:11204,w:false}], nearby:['Kathmandu-1','Kathmandu-2','Kathmandu-4','Kathmandu-5','Kathmandu-6'] },
  { id:'Kathmandu-4',  province:'Bagmati', district:'Kathmandu', voters:79400,  key:false,
    cands:[{n:'Sachin Timilsina',p:'NC',c:'#174ea6',i:'ST',notes:'Gagan Thapa moved to Sarlahi-4'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'Gagan Kumar Thapa',p:'NC',c:'#174ea6',v:18200,w:true},{n:'UML',p:'UML',c:'#c0392b',v:12400,w:false}], nearby:['Kathmandu-3','Kathmandu-5','Kathmandu-6'] },
  { id:'Kathmandu-5',  province:'Bagmati', district:'Kathmandu', voters:75222,  key:true, keyLbl:'Watch',
    cands:[{n:'Pradeep Paudel',p:'NC',c:'#174ea6',i:'PP',notes:'NC General Secretary'},{n:'Ishwar Pokharel',p:'UML',c:'#c0392b',i:'IP',incumbent:true,notes:'UML Senior VP'},{n:'Sasmit Pokhrel',p:'RSP',c:'#d4600a',i:'SP'},{n:'Kamal Thapa',p:'RPP',c:'#1a7a40',i:'KT',notable:true,notes:'Former Home Minister'}],
    prev:[{n:'Ishwar Pokharel',p:'UML',c:'#c0392b',v:15800,w:true},{n:'Pradeep Paudel',p:'NC',c:'#174ea6',v:13200,w:false}], nearby:['Kathmandu-4','Kathmandu-6','Kathmandu-7'] },
  { id:'Kathmandu-6',  province:'Bagmati', district:'Kathmandu', voters:67735,  key:true, keyLbl:'Watch',
    cands:[{n:'Krishna Baniya',p:'NC',c:'#174ea6',i:'KB'},{n:'Aman Maskey',p:'UML',c:'#c0392b',i:'AM'},{n:'Shishir Khanal',p:'RSP',c:'#d4600a',i:'SK',incumbent:true}],
    prev:[{n:'Shishir Khanal',p:'RSP',c:'#d4600a',v:14221,w:true},{n:'UML',p:'UML',c:'#c0392b',v:8917,w:false}], nearby:['Kathmandu-5','Kathmandu-7','Kathmandu-8'] },
  { id:'Kathmandu-7',  province:'Bagmati', district:'Kathmandu', voters:71300,  key:false,
    cands:[{n:'Pramod Guragain',p:'NC',c:'#174ea6',i:'PG'},{n:'Prakash Shrestha',p:'UML',c:'#c0392b',i:'PS'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'UML Won 2079',p:'UML',c:'#c0392b',v:13400,w:true}], nearby:['Kathmandu-6','Kathmandu-8'] },
  { id:'Kathmandu-8',  province:'Bagmati', district:'Kathmandu', voters:68900,  key:false,
    cands:[{n:'Sapana Rajbhandari',p:'NC',c:'#174ea6',i:'SR'},{n:'Biraj Bhakta Shrestha',p:'RSP',c:'#d4600a',i:'BB'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'RSP Won 2079',p:'RSP',c:'#d4600a',v:12800,w:true}], nearby:['Kathmandu-7','Kathmandu-9'] },
  { id:'Kathmandu-9',  province:'Bagmati', district:'Kathmandu', voters:70100,  key:false,
    cands:[{n:'Nanu Bastola',p:'NC',c:'#174ea6',i:'NB'},{n:'Dolprasad Aryal',p:'RSP',c:'#d4600a',i:'DA'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:13100,w:true}], nearby:['Kathmandu-8','Kathmandu-10'] },
  { id:'Kathmandu-10', province:'Bagmati', district:'Kathmandu', voters:66800,  key:false,
    cands:[{n:'Himal Karki',p:'NC',c:'#174ea6',i:'HK'},{n:'Chet Nath Sanjel',p:'UML',c:'#c0392b',i:'CS'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:12900,w:true}], nearby:['Kathmandu-9','Lalitpur-1'] },
  { id:'Lalitpur-1',  province:'Bagmati', district:'Lalitpur',  voters:82300,  key:false,
    cands:[{n:'Uday Shumsher Rana',p:'NC',c:'#174ea6',i:'UR'},{n:'Prem Maharjan',p:'UML',c:'#c0392b',i:'PM'},{n:'Budda Ratna Maharjan',p:'RSP',c:'#d4600a',i:'BM'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:16200,w:true}], nearby:['Lalitpur-2','Lalitpur-3','Kathmandu-10'] },
  { id:'Bhaktapur-1', province:'Bagmati', district:'Bhaktapur', voters:74600,  key:true, keyLbl:'Watch',
    cands:[{n:'Kiran Neupane',p:'NC',c:'#174ea6',i:'KN'},{n:'Som Mishra',p:'UML',c:'#c0392b',i:'SM'},{n:'Rukesh Ranjit',p:'RSP',c:'#d4600a',i:'RR'}],
    prev:[{n:'NCP Won 2079',p:'NCP',c:'#6b0f1a',v:14100,w:true},{n:'RSP',p:'RSP',c:'#d4600a',v:11200,w:false}], nearby:['Bhaktapur-2','Lalitpur-1'] },
  { id:'Chitwan-2',  province:'Bagmati', district:'Chitwan',   voters:98200,  key:true, keyLbl:'Most Watched',
    cands:[{n:'Rabi Lamichhane',p:'RSP',c:'#d4600a',i:'RL',incumbent:true,notable:true,notes:'RSP Chairman; won 2022 + by-election; 49,300 votes in 2022'},{n:'Mina Kharel',p:'NC',c:'#174ea6',i:'MK'},{n:'Ashwin Ghimire',p:'UML',c:'#c0392b',i:'AG'},{n:'Pratap Gurung',p:'NCP',c:'#6b0f1a',i:'PG'}],
    prev:[{n:'Rabi Lamichhane',p:'RSP',c:'#d4600a',v:49300,w:true},{n:'Umesh Shrestha',p:'NC',c:'#174ea6',v:14988,w:false}], nearby:['Chitwan-1','Chitwan-3'] },
  { id:'Chitwan-3',  province:'Bagmati', district:'Chitwan',   voters:94800,  key:true, keyLbl:'Watch',
    cands:[{n:'Renu Dahal',p:'NCP',c:'#6b0f1a',i:'RD',notable:true,notes:"Prachanda's daughter; former Bharatpur Mayor"},{n:'Sobita Gautam',p:'RSP',c:'#d4600a',i:'SG'},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:17200,w:true}], nearby:['Chitwan-1','Chitwan-2'] },
  { id:'Nuwakot-1',  province:'Bagmati', district:'Nuwakot',   voters:67200,  key:false,
    cands:[{n:'Prakash Sharan Mahat',p:'NC',c:'#174ea6',i:'PM',notable:true},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:14100,w:true}], nearby:['Nuwakot-2'] },
  // Gandaki Province
  { id:'Tanahun-1',  province:'Gandaki', district:'Tanahun',   voters:76100,  key:true, keyLbl:'Watch',
    cands:[{n:'Govinda Bhattarai',p:'NC',c:'#174ea6',i:'GB'},{n:'Bhagwati Neupane',p:'UML',c:'#c0392b',i:'BN'},{n:'Swarnim Wagle',p:'RSP',c:'#d4600a',i:'SW',notable:true}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:16800,w:true}], nearby:['Tanahun-2','Gorkha-1'] },
  { id:'Gorkha-2',   province:'Gandaki', district:'Gorkha',    voters:69800,  key:false,
    cands:[{n:'Prakash Dawadi',p:'NC',c:'#174ea6',i:'PD'},{n:'Lekhnath Nyaupane',p:'NCP',c:'#6b0f1a',i:'LN'},{n:'Chakre Milan',p:'UML',c:'#c0392b',i:'CM'},{n:'Kabindra Burlakoti',p:'RSP',c:'#d4600a',i:'KB'}],
    prev:[{n:'Prachanda',p:'Maoist/NC alliance',c:'#6b0f1a',v:26109,w:true},{n:'Kabindra Burlakoti',p:'RSP',c:'#d4600a',v:12639,w:false}], nearby:['Gorkha-1','Lamjung-1'] },
  { id:'Myagdi-1',   province:'Gandaki', district:'Myagdi',    voters:48300,  key:true, keyLbl:'Watch',
    cands:[{n:'Mahabir Pun',p:'IND',c:'#64748b',i:'MP',notable:true,notes:'Independent; prominent tech activist'},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'}],
    prev:[{n:'NC Won 2079',p:'NC',c:'#174ea6',v:12100,w:true}], nearby:['Parbat-1','Mustang-1'] },
  // Lumbini Province
  { id:'Rupandehi-2', province:'Lumbini', district:'Rupandehi', voters:88600,  key:false,
    cands:[{n:'Bishnu Paudel',p:'UML',c:'#c0392b',i:'BP',notable:true,notes:'UML VP; former Finance Minister'},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'},{n:'RSP Candidate',p:'RSP',c:'#d4600a',i:'RC'}],
    prev:[{n:'Bishnu Paudel',p:'UML',c:'#c0392b',v:22100,w:true}], nearby:['Rupandehi-1','Rupandehi-3'] },
  // Karnali Province
  { id:'Rukum East-1', province:'Karnali', district:'Rukum East', voters:52100, key:true, keyLbl:'Watch',
    cands:[{n:'Pushpa Kamal Dahal',p:'NCP',c:'#6b0f1a',i:'PD',notable:true,notes:"'Prachanda'; NCP Coordinator; moved from Gorkha-2"},{n:'UML Candidate',p:'UML',c:'#c0392b',i:'UC'},{n:'NC Candidate',p:'NC',c:'#174ea6',i:'NC'}],
    prev:[{n:'NCP Won 2079',p:'NCP',c:'#6b0f1a',v:14200,w:true}], nearby:['Rukum West-1'] },
];

const KEY_RACES = [
  { id:'Jhapa-5', label:'Most Watched', labelCls:'badge-key', cands:['K.P. Sharma Oli (UML)','Balendra Shah (RSP)','Khagendra Adhikari (NC)'] },
  { id:'Chitwan-2', label:'Watch', labelCls:'badge-watch', cands:['Rabi Lamichhane (RSP)','Mina Kharel (NC)','Ashwin Ghimire (UML)'] },
  { id:'Sarlahi-4', label:'Watch', labelCls:'badge-watch', cands:['Gagan Thapa (NC)','Amaresh Singh (RSP)'] },
  { id:'Kathmandu-3', label:'Watch', labelCls:'badge-watch', cands:['Ramesh Aryal (NC)','Rameshwor Phuyal (UML)','Kulman Ghising (UNP)','Raju Pandey (RSP)'] },
  { id:'Kathmandu-5', label:'Watch', labelCls:'badge-watch', cands:['Pradeep Paudel (NC)','Ishwar Pokharel (UML)','Kamal Thapa (RPP)'] },
];

const LEADERS = [
  { name:'Gagan Kumar Thapa', sub:'NC President', color:'#174ea6', const:'Sarlahi-4' },
  { name:'K.P. Sharma Oli',   sub:'UML Chairman', color:'#c0392b', const:'Jhapa-5' },
  { name:'Balendra Shah',     sub:'RSP PM Candidate', color:'#d4600a', const:'Jhapa-5' },
  { name:'Rabi Lamichhane',   sub:'RSP Chairman', color:'#d4600a', const:'Chitwan-2' },
  { name:'P.K. Dahal "Prachanda"', sub:'NCP Coordinator', color:'#6b0f1a', const:'Rukum East-1' },
  { name:'Rajendra Lingden',  sub:'RPP Chair', color:'#1a7a40', const:'Jhapa-3' },
  { name:'Kulman Ghising',    sub:'UNP Chair', color:'#0369a1', const:'Kathmandu-3' },
  { name:'Pradeep Paudel',    sub:'NC General Sec.', color:'#174ea6', const:'Kathmandu-5' },
  { name:'Ishwar Pokharel',   sub:'UML Senior VP', color:'#c0392b', const:'Kathmandu-5' },
];

const PROVINCES_SEATS = [
  { name:'Koshi', seats:28 }, { name:'Madhesh', seats:32 },
  { name:'Bagmati', seats:38 }, { name:'Gandaki', seats:22 },
  { name:'Lumbini', seats:26 }, { name:'Karnali', seats:12 },
  { name:'Sudurpashchim', seats:14 },
];

const REF_2079 = [
  { abbr:'NC',  name:'Nepali Congress',            color:'#174ea6', pct:27.00, seats:32, above:true },
  { abbr:'UML', name:'CPN (UML)',                  color:'#c0392b', pct:23.00, seats:34, above:true },
  { abbr:'MC',  name:'CPN (Maoist Centre)',         color:'#6b0f1a', pct:11.70, seats:14, above:true, note:'Merged into NCP for 2082' },
  { abbr:'RSP', name:'Rastriya Swatantra Party',   color:'#d4600a', pct:10.55, seats:13, above:true },
  { abbr:'RPP', name:'Rastriya Prajatantra Party', color:'#1a7a40', pct:5.56,  seats:7,  above:true },
  { abbr:'US',  name:'CPN (Unified Socialist)',    color:'#854d0e', pct:4.62,  seats:0,  above:true, note:'Merged into NCP for 2082' },
  { abbr:'LSP', name:'Loktantrik Samajwadi Party', color:'#5b21b6', pct:3.91,  seats:0,  above:true },
  { abbr:'PSP', name:"People's Socialist Party",   color:'#7c3aed', pct:3.09,  seats:3,  above:true },
  { abbr:'Janamat', name:'Janamat Party',          color:'#92400e', pct:1.29,  seats:0,  above:false },
];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SPA ROUTER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentPage = 'dashboard';
let currentConst = 'Kathmandu-3';

function nav(page, constId) {
  currentPage = page;
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  document.getElementById('nav-' + page).classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});
  if (page === 'constituency') {
    if (constId) currentConst = constId;
    renderConst();
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PAGE 1: DASHBOARD RENDER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let constVisible = 14;
let constProvince = 'all';
let constSearch = '';

function renderDashboard() {
  // Party grid
  const pg = document.getElementById('party-grid');
  pg.innerHTML = '';
  PARTIES.forEach((p, i) => {
    const d = document.createElement('div');
    d.className = 'party-card anim a' + Math.min(i+2, 8);
    d.style.borderTopColor = p.color;
    d.innerHTML = `
      <div class="p-abbr" style="color:${p.color}">${p.abbr}</div>
      <div class="p-full">${p.name}${p.note ? `<br><small style="font-size:10px;color:var(--ink-3)">${p.note}</small>` : ''}</div>
      <div class="p-leader-lbl">Leader</div>
      <div class="p-leader">${p.leader}</div>
      <div class="p-seats">
        <div class="p-seat-item"><div class="p-seat-num" style="color:${p.color}">0</div><div class="p-seat-lbl">FPTP</div></div>
        <div class="p-seat-item"><div class="p-seat-num" style="color:${p.color}">0</div><div class="p-seat-lbl">PR</div></div>
        <div class="p-seat-item"><div class="p-seat-num" style="color:${p.color}">0</div><div class="p-seat-lbl">Total</div></div>
      </div>
      ${p.pmcand ? `<div class="pm-tag">â˜… PM Candidate</div>` : ''}
    `;
    pg.appendChild(d);
  });

  // Key races widget
  const krw = document.getElementById('key-races-widget');
  krw.innerHTML = '';
  KEY_RACES.forEach(kr => {
    const div = document.createElement('div');
    div.className = 'key-race';
    const constData = CONSTITUENCIES.find(c => c.id === kr.id);
    div.innerHTML = `
      <div class="kr-title" onclick="nav('constituency','${kr.id}')">
        ${kr.id} <span class="badge ${kr.labelCls}">${kr.label}</span>
      </div>
      ${(constData ? constData.cands : []).map(c =>
        `<div class="kr-cand"><span class="kr-dot" style="background:${c.c}"></span><span class="kr-name">${c.n}</span><span class="pill" style="background:${c.c}">${c.p}</span><span class="kr-votes">0</span></div>`
      ).join('')}
    `;
    krw.appendChild(div);
  });

  // Leaders widget
  const lw = document.getElementById('leaders-widget');
  lw.innerHTML = '';
  LEADERS.forEach(l => {
    const div = document.createElement('div');
    div.className = 'leader-row';
    div.style.cursor = 'pointer';
    div.innerHTML = `<span class="leader-dot" style="background:${l.color}"></span><span class="leader-name">${l.name}<small>${l.sub}</small></span><span class="leader-const">${l.const}</span>`;
    div.onclick = () => nav('constituency', l.const);
    lw.appendChild(div);
  });

  // Provinces widget
  const pw = document.getElementById('prov-widget');
  pw.innerHTML = '';
  PROVINCES_SEATS.forEach(p => {
    const div = document.createElement('div');
    div.className = 'prov-row';
    div.innerHTML = `<span class="prov-name">${p.name} Province</span><span class="prov-seats">${p.seats} FPTP seats</span>`;
    pw.appendChild(div);
  });

  renderConstTable();
}

function filterConst(q) { constSearch = q.toLowerCase(); constVisible = 14; renderConstTable(); }
function filterProv(el, prov) {
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active'); constProvince = prov; constVisible = 14; renderConstTable();
}
function showMore() { constVisible += 10; renderConstTable(); }

function renderConstTable() {
  const data = CONSTITUENCIES.filter(c => {
    const ms = c.id.toLowerCase().includes(constSearch) || c.cands.some(cd => cd.n.toLowerCase().includes(constSearch));
    const mp = constProvince === 'all' || c.province === constProvince;
    return ms && mp;
  });
  const tbody = document.getElementById('const-tbody');
  tbody.innerHTML = '';
  data.slice(0, constVisible).forEach(c => {
    const tr = document.createElement('tr');
    const keyTag = c.key ? `<span class="badge ${c.keyLbl==='Most Watched'?'badge-key':'badge-watch'}" style="margin-left:5px">${c.keyLbl}</span>` : '';
    const candsHtml = c.cands.slice(0,3).map(cd =>
      `<div class="cand-line"><span class="cand-dot" style="background:${cd.c}"></span>${cd.n} <span class="pill" style="background:${cd.c};margin-left:3px">${cd.p}</span></div>`
    ).join('') + (c.cands.length > 3 ? `<div style="font-size:10px;color:var(--ink-3);margin-top:2px">+${c.cands.length-3} more</div>` : '');
    tr.innerHTML = `
      <td><span class="td-const-name">${c.id}${keyTag}<small>${c.province} Â· ${c.district}</small></span></td>
      <td style="line-height:1.4">${candsHtml}</td>
      <td><span class="mono" style="font-size:11px">${c.voters.toLocaleString()}</span></td>
      <td><span class="votes-zero">0 â€” not started</span></td>
    `;
    tr.onclick = () => nav('constituency', c.id);
    tbody.appendChild(tr);
  });
  document.getElementById('show-more').style.display = constVisible >= data.length ? 'none' : 'block';
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PAGE 2: CONSTITUENCY DETAIL RENDER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderConst() {
  const d = CONSTITUENCIES.find(c => c.id === currentConst);
  if (!d) return;

  document.getElementById('bc-prov').textContent = d.province;
  document.getElementById('bc-name').textContent = d.id;
  document.getElementById('hero-h1').textContent = `${d.district} Constituency No. ${d.id.split('-')[1]} â€” ${d.id}`;
  document.getElementById('cands-head').textContent = `Candidates â€” ${d.id}`;

  document.getElementById('hero-chips').innerHTML = `
    <span class="chip">ğŸ“ ${d.province} Province</span>
    <span class="chip">ğŸ› ${d.district} District</span>
    <span class="chip">ğŸ‘¥ ${d.voters.toLocaleString()} Registered Voters</span>
    <span class="chip">ğŸ—³ FPTP â€” Federal</span>
    <span class="chip">ğŸ‘¤ ${d.cands.length} Candidates</span>
    ${d.key ? `<span class="badge ${d.keyLbl==='Most Watched'?'badge-key':'badge-watch'}" style="margin:0">${d.keyLbl}</span>` : ''}
  `;

  // Facts
  document.getElementById('facts-list').innerHTML = `
    <div class="fact-row"><span class="fact-label">Constituency No.</span><span class="fact-val">${d.id.split('-')[1].padStart(2,'0')}</span></div>
    <div class="fact-row"><span class="fact-label">Province</span><span class="fact-val" style="font-family:'DM Sans',sans-serif">${d.province}</span></div>
    <div class="fact-row"><span class="fact-label">District</span><span class="fact-val" style="font-family:'DM Sans',sans-serif">${d.district}</span></div>
    <div class="fact-row"><span class="fact-label">Registered Voters</span><span class="fact-val">${d.voters.toLocaleString()}</span></div>
    <div class="fact-row"><span class="fact-label">Total Candidates</span><span class="fact-val">${d.cands.length}</span></div>
    <div class="fact-row"><span class="fact-label">Votes Cast</span><span class="fact-val" style="color:var(--pre)">0</span></div>
    <div class="fact-row"><span class="fact-label">Voter Turnout</span><span class="fact-val" style="color:var(--pre)">0%</span></div>
    <div class="fact-row"><span class="fact-label">Election Date</span><span class="fact-val" style="font-family:'DM Sans',sans-serif;font-size:11px">5 Mar 2026</span></div>
  `;

  // Candidate cards
  const cl = document.getElementById('cand-list');
  cl.innerHTML = '';
  d.cands.forEach((c, i) => {
    const badges = [];
    if (c.pmcand)    badges.push('<span class="badge badge-pm">â˜… PM Candidate</span>');
    if (c.incumbent) badges.push('<span class="badge badge-incumbent">Incumbent</span>');
    if (c.notable)   badges.push('<span class="badge badge-notable">Notable</span>');
    if (!c.pmcand && !c.incumbent && !c.notable) badges.push('<span class="badge badge-pre">â³ Awaiting votes</span>');
    const notesHtml = c.notes ? `<span style="font-size:10px;color:var(--ink-3);margin-left:6px">Â· ${c.notes}</span>` : '';
    const card = document.createElement('div');
    card.className = 'cand-card';
    card.innerHTML = `
      <div class="cand-top">
        <span class="cand-num">${i+1}</span>
        <div class="cand-avatar" style="background:${c.c}">${c.i}</div>
        <div class="cand-info">
          <div class="cand-name">${c.n}</div>
          <div class="cand-party" style="color:${c.c}">${c.p} <span class="cand-party-full">â€” ${PARTIES.find(p=>p.abbr===c.p)?.name || c.p}</span></div>
        </div>
        <div class="cand-votes"><div class="cand-votes-num">0</div><div class="cand-votes-lbl">votes</div></div>
      </div>
      <div class="cand-meta">${badges.join('')}${notesHtml}</div>
    `;
    card.onclick = () => toast(`${c.n} (${c.p}) â€” votes will show once counting begins on election day`);
    cl.appendChild(card);
  });

  // Prev results
  const pl = document.getElementById('prev-list');
  pl.innerHTML = '';
  const maxV = Math.max(...d.prev.map(p => p.v));
  d.prev.forEach(p => {
    const row = document.createElement('div');
    row.className = 'prev-row';
    row.innerHTML = `
      <span class="prev-dot" style="background:${p.c}"></span>
      <span class="prev-name">${p.n}<small>${p.p}</small>
        <div class="prev-bar-wrap"><div class="prev-bar-fill" style="width:${(p.v/maxV*100).toFixed(1)}%;background:${p.c}"></div></div>
      </span>
      <span class="prev-votes">${p.v.toLocaleString()}</span>
      ${p.w ? '<span class="badge badge-won" style="margin-left:6px">Won</span>' : ''}
    `;
    pl.appendChild(row);
  });

  // Nearby
  const nl = document.getElementById('nearby-list');
  nl.innerHTML = '';
  (d.nearby || []).forEach(name => {
    const nd = CONSTITUENCIES.find(c => c.id === name);
    const row = document.createElement('div');
    row.className = 'nearby-row';
    row.innerHTML = `<span class="nearby-name">${name}<small>${nd ? nd.district + ' Â· ' + nd.voters.toLocaleString() + ' voters' : 'Data coming'}</small></span><span style="color:var(--pre);font-size:11px;font-weight:700">â†’</span>`;
    row.onclick = () => { currentConst = name; renderConst(); window.scrollTo({top:0,behavior:'smooth'}); };
    nl.appendChild(row);
  });
}

// Constituency search
function setupConstSearch() {
  const inp = document.getElementById('sc-inp');
  const drop = document.getElementById('sc-drop');
  const ALL = CONSTITUENCIES.map(c => c.id);

  inp.addEventListener('input', () => {
    const q = inp.value.toLowerCase();
    const matches = q ? ALL.filter(n => n.toLowerCase().includes(q)) : ALL.slice(0, 10);
    drop.innerHTML = '';
    matches.slice(0, 10).forEach(name => {
      const nd = CONSTITUENCIES.find(c => c.id === name);
      const item = document.createElement('div');
      item.className = 'sc-item';
      item.innerHTML = `<strong>${name}</strong><span>${nd ? nd.province : ''}</span>`;
      item.onclick = () => { inp.value = ''; drop.classList.remove('open'); currentConst = name; renderConst(); };
      drop.appendChild(item);
    });
    drop.classList.toggle('open', matches.length > 0);
  });

  document.addEventListener('click', e => { if (!e.target.closest('.sc-wrap')) drop.classList.remove('open'); });
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PAGE 3: PR RENDER
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderPR() {
  // Stat cards
  const stats = [
    { label:'PR Seats', num:'110', sub:'Nationwide' },
    { label:'Threshold', num:'3%', sub:'of valid PR votes' },
    { label:'Registered Voters', num:'18.9M', sub:'ECN Dec 2025' },
    { label:'Parties Contesting', num:'68', sub:'Registered for PR' },
    { label:'Votes Counted', num:'0', sub:'Awaiting election', color:'var(--pre)' },
  ];
  const sr = document.getElementById('pr-stats');
  sr.innerHTML = '';
  stats.forEach((s, i) => {
    const d = document.createElement('div');
    d.className = `stat-card anim a${i+2}`;
    d.innerHTML = `<div class="stat-label">${s.label}</div><div class="stat-num" style="${s.color?`color:${s.color}`:''}">${s.num}</div><div class="stat-sub">${s.sub}</div>`;
    sr.appendChild(d);
  });

  // PR table
  const tbody = document.getElementById('pr-tbody');
  tbody.innerHTML = '';
  PARTIES.forEach((p, i) => {
    const refBar = p.prev2079pct != null
      ? `<div class="ref-bar-wrap"><div class="ref-bar-fill" style="width:${(p.prev2079pct/30*100).toFixed(0)}%;background:${p.color}"></div></div><span class="mono" style="font-size:11px;color:var(--ink-3)">${p.prev2079pct.toFixed(2)}%</span>`
      : `<span style="font-size:11px;color:var(--ink-3)">New 2082</span>`;
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="mono" style="color:var(--ink-3)">${i+1}</td>
      <td><strong style="color:${p.color}">${p.abbr}</strong> <span style="font-size:11px;color:var(--ink-2)">â€” ${p.name}</span>${p.note?`<br><small style="color:var(--ink-3);font-size:10px">${p.note}</small>`:''}</td>
      <td style="font-size:12px;color:var(--ink-3)">${p.ne}</td>
      <td style="font-size:12px">${p.leader}</td>
      <td><span class="zero-pre">0 â€” awaiting election</span></td>
      <td><span class="zero-pre">0.00%</span></td>
      <td><span style="font-family:'Playfair Display',serif;font-size:18px;font-weight:700;color:var(--ink-3)">â€”</span></td>
      <td>${refBar}</td>
      <td><span style="font-size:10px;color:var(--ink-3)">Pending</span></td>
    `;
    tr.onclick = () => toast(`${p.name} â€” PR votes will populate on election day (Falgun 21)`);
    tbody.appendChild(tr);
  });

  // 2079 reference
  const ref = document.getElementById('ref-section');
  ref.innerHTML = '';
  const maxPct = Math.max(...REF_2079.map(r => r.pct));
  REF_2079.forEach(r => {
    const row = document.createElement('div');
    row.className = 'ref-row';
    row.innerHTML = `
      <span class="ref-dot" style="background:${r.color}"></span>
      <span class="ref-name">${r.abbr} â€” ${r.name}${r.note?`<small>${r.note}</small>`:''}</span>
      <div class="ref-bar-h"><div class="ref-bar-hbg"><div class="ref-bar-hfill" style="width:${(r.pct/maxPct*100).toFixed(1)}%;background:${r.color}"></div></div></div>
      <span class="ref-pct" style="color:${r.color}">${r.pct.toFixed(2)}%</span>
      <span class="ref-seats">${r.seats ? r.seats+' seats' : '0 seats'}</span>
      <span class="badge ${r.above?'badge-nat':'badge-below'}">${r.above?'âœ“ National':'âœ• Below'}</span>
    `;
    ref.appendChild(row);
  });
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CLOCK + COUNTDOWN
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateClock() {
  document.getElementById('clock').textContent = new Date().toLocaleString('en-GB',{day:'2-digit',month:'short',hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false}) + ' NPT';
}
function updateCountdown() {
  const election = new Date('2026-03-05T07:00:00+05:45');
  const diff = election - new Date();
  if (diff <= 0) { ['cd-d','cd-h','cd-m','cd-s'].forEach(id => document.getElementById(id).textContent = '0'); return; }
  document.getElementById('cd-d').textContent = Math.floor(diff/86400000);
  document.getElementById('cd-h').textContent = String(Math.floor((diff%86400000)/3600000)).padStart(2,'0');
  document.getElementById('cd-m').textContent = String(Math.floor((diff%3600000)/60000)).padStart(2,'0');
  document.getElementById('cd-s').textContent = String(Math.floor((diff%60000)/1000)).padStart(2,'0');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// TOAST
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toast(msg) {
  const t = document.getElementById('toast'); t.textContent = msg; t.classList.add('show');
  clearTimeout(toast._t); toast._t = setTimeout(() => t.classList.remove('show'), 3200);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// INIT
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderDashboard();
renderConst();
renderPR();
setupConstSearch();
updateClock(); setInterval(updateClock, 1000);
updateCountdown(); setInterval(updateCountdown, 1000);
</script>
</body>
</html>
